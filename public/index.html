<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="css/joint.css"/>
    <link rel="stylesheet" type="text/css" href="css/app.css"/>
    <link rel="stylesheet" href="css/jquery-ui.css">
    <link rel="stylesheet" href="css/jquery-ui.theme.css">
    <!-- dependencies -->
    <script src="libraries/jquery-3.3.1.js"></script>
    <script src="libraries/jquery.fittext.js"></script>
    <script src="libraries/lodash/4.17.11/lodash.js"></script>
    <script src="libraries/backbone/1.3.3/backbone.js"></script>
    <script src="libraries/joint/2.1.0/joint.js"></script>
    <script src="libraries/jquery-ui.js"></script>
    <script src="libraries/services.js"></script>
    <script src="libraries/steps-editor.js"></script>
    <script src="libraries/app.js"></script>
    <script src="libraries/pipeline-designer.js"></script>
    <title>Application Manager</title>
</head>
<body>
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Application Editor</a></li>
        <li><a href="#tabs-2">Pipeline Designer</a></li>
        <li><a href="#tabs-3">Step Editor</a></li>
    </ul>
    <div id="tabs-1">
        <div style="height: 10%; width:100%; margin-bottom: 10px;">
            <div class="top-name">
                <label id="application-label">Application:</label><span id="applicationName"></span>
            </div>
            <div class="top-buttons">
                <button id="save-application-button" class="ui-button ui-widget ui-corner-all">Save</button>
                <button id="new-application-button" class="ui-button ui-widget ui-corner-all">New</button>
                <button id="reset-application-button" class="ui-button ui-widget ui-corner-all">Reset</button>
            </div>
        </div>
    </div>
    <div id="tabs-2">
        <div>
            <div style="height: 10%; width:100%; margin-bottom: 10px;">
                <div class="top-name">
                    <label id="pipeline-label">Pipeline:</label><span id="pipelineName"></span>
                </div>
                <div class="top-buttons">
                    <button id="save-button" class="ui-button ui-widget ui-corner-all">Save</button>
                    <button id="new-button" class="ui-button ui-widget ui-corner-all">New</button>
                    <button id="reset-button" class="ui-button ui-widget ui-corner-all">Reset</button>
                </div>
            </div>
            <!-- TODO Add buttons to add a new pipeline and save changes -->
            <div class="left">
                <div class="panel">
                    <div class="panel-heading"><span>Pipelines</span></div>
                    <div class="panel-body">
                        <div>
                            <div class="form-group">
                                <select name="pipelines" id="pipelines"></select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-heading"><span>Steps</span></div>
                    <div id="step-panel" class="panel-body step-panel"></div>
                </div>
                <div id="step-properties" class="panel">
                    <div class="panel-heading"><span>Step Data</span></div>
                    <div class="panel-body">
                        <div id="step-form">
                            <div class="form-group">
                                <label>Id:</label>
                                <div id="pipelineStepId"></div>
                            </div>
                            <div class="form-group">
                                <label>Step Id:</label>
                                <div id="stepId"></div>
                            </div>
                            <div class="form-group">
                                <label>Name:</label>
                                <div id="displayName"></div>
                            </div>
                            <div class="form-group">
                                <label>Description:</label>
                                <div id="description"></div>
                            </div>
                            <div class="form-group">
                                <label>Type:</label>
                                <div id="type"></div>
                            </div>
                        </div>
                    </div>
                    <div id="step-parameters-form" class="panel-body">
                        <div></div>
                    </div>
                </div>
            </div>
            <!-- TODO Add a slider to allow zoom on canvas -->
            <div class="right">
                <div id="pipeline-designer" class="joint-paper joint-theme-default" style="width: 100%"
                     ondrop="drop(event)"
                     ondragover="allowDrop(event)"></div>
            </div>
        </div>
    </div>
    <div id="tabs-3">
        <div style="height: 10%; width:100%; margin-bottom: 10px;">
            <div class="top-buttons" style="width: 100%">
                <button id="save-step-button" class="ui-button ui-widget ui-corner-all">Save</button>
                <button id="new-step-button" class="ui-button ui-widget ui-corner-all">New</button>
                <button id="reset-step-button" class="ui-button ui-widget ui-corner-all">Reset</button>
            </div>
        </div>
        <div class="left" style="overflow: auto">
            <div class="panel">
                <div class="panel-heading"><span>Steps</span></div>
                <div id="step-selector-panel" class="panel-body step-selector-panel">
                    <ol id="step-selector" style="width: 90%"></ol>
                </div>
            </div>
        </div>
        <div class="right">
            <div id="edit-step-form" class="panel panel-body">
                <div class="step-form">
                    <label>Id:</label>
                    <div id="edit-stepId"></div>
                </div>
                <div class="step-form">
                    <label>Name:</label><input id="edit-displayName"/>
                </div>
                <div class="step-form">
                    <label>Description:</label><input id="edit-description"/>
                </div>
                <div class="step-form">
                    <label>Engine Meta:</label><input id="edit-engineMeta"/>
                </div>
                <div id="branch-type" class="step-form">
                    <label>Type:</label>
                    <div>
                        <label for="pipelineRadio">Pipeline</label>
                        <input type="radio" name="stepTypeRadio" value="Pipeline" id="pipelineRadio">
                        <label for="branchRadio">Branch</label>
                        <input type="radio" name="stepTypeRadio" value="branch" id="branchRadio">
                    </div>
                </div>
                <!-- Dynamic parameters panel -->
                <div>
                    <div style="height: 10%; width:100%; margin-bottom: 10px;">
                        <div class="step-parameters-name"><label>Parameters</label></div>
                        <div class="top-buttons">
                            <button id="add-step-parameter-button" class="ui-button ui-widget ui-corner-all ui-button-icon-only"
                                    title="Add Parameter">
                                <span class="ui-icon ui-icon-plus"></span>Add Parameter
                            </button>
                        </div>
                    </div>
                    <div id="edit-step-parameters"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal dialog -->
<div id="dialog-confirm" title="Clear Form?">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;">
    </span>These items will be permanently deleted and cannot be recovered. Are you sure?</p>
</div>
<!-- Add step dialog -->
<div id="dialog-step-form" title="Add Step">
    <p class="validateTips">Enter a unique id for this step.</p>
    <form id="add-step-form">
        <fieldset>
            <label for="add-step-id">Name</label>
            <input type="text" name="name" id="add-step-id" value="" class="text ui-widget-content ui-corner-all">
        </fieldset>
    </form>
</div>
<!-- Add pipeline dialog -->
<div id="dialog-pipeline-form" title="Add Pipeline">
    <p class="validateTips">Enter a name for this pipeline.</p>
    <form id="add-pipeline-form">
        <fieldset>
            <label for="add-pipeline-id">Name</label>
            <input type="text" name="name" id="add-pipeline-id" value="" class="text ui-widget-content ui-corner-all">
        </fieldset>
    </form>
</div>
<!-- Pipeline save errors dialog -->
<div id="dialog-pipeline-error" title="Clear Pipeline Designer?">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;">
    </span>There were errors with the pipeline. The following parameters are required:</p>
    <div id="dialog-pipeline-error-field"></div>
</div>
</body>
</html>
